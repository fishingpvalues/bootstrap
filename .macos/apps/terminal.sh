#!/usr/bin/env bash\n\n# Only use UTF-8 in Terminal.app\ndefaults write com.apple.terminal StringEncodings -array 4\n\n# Enable Secure Keyboard Entry in Terminal.app\n# See: https://security.stackexchange.com/a/47786/8918\ndefaults write com.apple.terminal SecureKeyboardEntry -bool true\n\n# Disable the annoying line marks\ndefaults write com.apple.Terminal ShowLineMarks -int 0\n\n# Don't display the annoying prompt when quitting iTerm\ndefaults write com.googlecode.iterm2 PromptOnQuit -bool false\n\n# Use a modified version of the Solarized Dark theme by default in Terminal.app\nTHEME_PATH="${HOME}/init/Solarized Dark xterm-256color.terminal"\nITERM_THEME_PATH="${HOME}/init/Solarized Dark.itermcolors"\n\n# Create init directory if it doesn't exist\nmkdir -p "${HOME}/init"\n\n# Download themes if they don't exist\nif [ ! -f "$THEME_PATH" ]; then\n    curl -o "$THEME_PATH" "https://raw.githubusercontent.com/tomislav/osx-terminal.app-colors-solarized/master/Solarized%20Dark%20xterm-256color.terminal"\nfi\n\nif [ ! -f "$ITERM_THEME_PATH" ]; then\n    curl -o "$ITERM_THEME_PATH" "https://raw.githubusercontent.com/altercation/solarized/master/iterm2-colors-solarized/Solarized%20Dark.itermcolors"\nfi\n\n# Apply Terminal.app theme\nif [ -f "$THEME_PATH" ]; then\n    osascript <<EOD\ntell application "Terminal"\n    local allOpenedWindows\n    local initialOpenedWindows\n    local windowID\n    set themeName to "Solarized Dark xterm-256color"\n\n    (* Store the IDs of all the open terminal windows. *)\n    set initialOpenedWindows to id of every window\n\n    (* Open the custom theme so that it gets added to the list\n       of available terminal themes (note: this will open two\n       additional terminal windows). *)\n    do shell script "open '$THEME_PATH'"\n\n    (* Wait a little bit to ensure that the custom theme is added. *)\n    delay 1\n\n    (* Set the custom theme as the default terminal theme. *)\n    set default settings to settings set themeName\n\n    (* Get the IDs of all the currently opened terminal windows. *)\n    set allOpenedWindows to id of every window\n\n    repeat with windowID in allOpenedWindows\n        (* Close the additional windows that were opened in order\n           to add the custom theme to the list of terminal themes. *)\n        if initialOpenedWindows does not contain windowID then\n            close (every window whose id is windowID)\n        else\n            (* Change the theme for the initial opened terminal windows\n               to remove the need to close them in order for the custom\n               theme to be applied. *)\n            set current settings of tabs of (every window whose id is windowID) to settings set themeName\n        end if\n    end repeat\nend tell\nEOD\nelse\n    echo "Warning: Terminal theme file not found at $THEME_PATH"\nfi\n\n# Install the Solarized Dark theme for iTerm\nif [ -f "$ITERM_THEME_PATH" ]; then\n    open "$ITERM_THEME_PATH"\nelse\n    echo "Warning: iTerm theme file not found at $ITERM_THEME_PATH"\nfi 