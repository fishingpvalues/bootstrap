#!/usr/bin/env bash\n\n###############################################################################\n# Finder                                                                      #\n###############################################################################\n\n# Ensure the Preferences directory exists\nPREFS_DIR="${HOME}/Library/Preferences"\nmkdir -p "$PREFS_DIR"\n\n# Function to safely run PlistBuddy commands\nrun_plistbuddy() {\n    local plist="$1"\n    local command="$2"\n    local default="$3"\n    \n    # Create plist if it doesn't exist\n    if [ ! -f "$plist" ]; then\n        /usr/libexec/PlistBuddy -c "Save" "$plist" 2>/dev/null\n    fi\n    \n    # Run the command\n    if ! /usr/libexec/PlistBuddy -c "$command" "$plist" 2>/dev/null; then\n        # If the command failed, try to create the entry with a default value\n        if [ -n "$default" ]; then\n            /usr/libexec/PlistBuddy -c "Add :$command $default" "$plist" 2>/dev/null\n        fi\n    fi\n}\n\n# Finder: allow quitting via âŒ˜ + Q; doing so will also hide desktop icons\ndefaults write com.apple.finder QuitMenuItem -bool true\n\n# Finder: disable window animations and Get Info animations\ndefaults write com.apple.finder DisableAllAnimations -bool true\n\n# Set Desktop as the default location for new Finder windows\n# For other paths, use `PfLo` and `file:///full/path/here/`\ndefaults write com.apple.finder NewWindowTarget -string "PfDe"\ndefaults write com.apple.finder NewWindowTargetPath -string "file://${HOME}/Desktop/"\n\n# Show icons for hard drives, servers, and removable media on the desktop\ndefaults write com.apple.finder ShowExternalHardDrivesOnDesktop -bool true\ndefaults write com.apple.finder ShowHardDrivesOnDesktop -bool true\ndefaults write com.apple.finder ShowMountedServersOnDesktop -bool true\ndefaults write com.apple.finder ShowRemovableMediaOnDesktop -bool true\n\n# Finder: show hidden files by default\ndefaults write com.apple.finder AppleShowAllFiles -bool true\n\n# Finder: show all filename extensions\ndefaults write NSGlobalDomain AppleShowAllExtensions -bool true\n\n# Finder: show status bar\ndefaults write com.apple.finder ShowStatusBar -bool true\n\n# Finder: show path bar\ndefaults write com.apple.finder ShowPathbar -bool true\n\n# Display full POSIX path as Finder window title\ndefaults write com.apple.finder _FXShowPosixPathInTitle -bool true\n\n# Keep folders on top when sorting by name\ndefaults write com.apple.finder _FXSortFoldersFirst -bool true\n\n# When performing a search, search the current folder by default\ndefaults write com.apple.finder FXDefaultSearchScope -string "SCcf"\n\n# Disable the warning when changing a file extension\ndefaults write com.apple.finder FXEnableExtensionChangeWarning -bool false\n\n# Enable spring loading for directories\ndefaults write NSGlobalDomain com.apple.springing.enabled -bool true\n\n# Remove the spring loading delay for directories\ndefaults write NSGlobalDomain com.apple.springing.delay -float 0\n\n# Avoid creating .DS_Store files on network or USB volumes\ndefaults write com.apple.desktopservices DSDontWriteNetworkStores -bool true\ndefaults write com.apple.desktopservices DSDontWriteUSBStores -bool true\n\n# Disable disk image verification\ndefaults write com.apple.frameworks.diskimages skip-verify -bool true\ndefaults write com.apple.frameworks.diskimages skip-verify-locked -bool true\ndefaults write com.apple.frameworks.diskimages skip-verify-remote -bool true\n\n# Automatically open a new Finder window when a volume is mounted\ndefaults write com.apple.frameworks.diskimages auto-open-ro-root -bool true\ndefaults write com.apple.frameworks.diskimages auto-open-rw-root -bool true\ndefaults write com.apple.finder OpenWindowForNewRemovableDisk -bool true\n\n# Use list view in all Finder windows by default\n# Four-letter codes for the other view modes: `icnv`, `clmv`, `glyv`\ndefaults write com.apple.finder FXPreferredViewStyle -string "Nlsv"\n\n# Disable the warning before emptying the Trash\ndefaults write com.apple.finder WarnOnEmptyTrash -bool false\n\n# Enable AirDrop over Ethernet and on unsupported Macs running Lion\ndefaults write com.apple.NetworkBrowser BrowseAllInterfaces -bool true\n\n# Show the ~/Library folder\nchflags nohidden ~/Library && xattr -d com.apple.FinderInfo ~/Library 2>/dev/null || true\n\n# Show the /Volumes folder\nsudo chflags nohidden /Volumes || true\n\n# Expand the following File Info panes:\n# "General", "Open with", and "Sharing & Permissions"\ndefaults write com.apple.finder FXInfoPanesExpanded -dict \\n	General -bool true \\n	OpenWith -bool true \\n	Privileges -bool true \n\n# Set up Finder view settings\nFINDER_PLIST="$PREFS_DIR/com.apple.finder.plist"\n\n# Show item info near icons on the desktop and in other icon views\nrun_plistbuddy "$FINDER_PLIST" "Set :DesktopViewSettings:IconViewSettings:showItemInfo true" "bool"\nrun_plistbuddy "$FINDER_PLIST" "Set :FK_StandardViewSettings:IconViewSettings:showItemInfo true" "bool"\nrun_plistbuddy "$FINDER_PLIST" "Set :StandardViewSettings:IconViewSettings:showItemInfo true" "bool"\n\n# Show item info to the right of the icons on the desktop\nrun_plistbuddy "$FINDER_PLIST" "Set :DesktopViewSettings:IconViewSettings:labelOnBottom false" "bool"\n\n# Enable snap-to-grid for icons\nrun_plistbuddy "$FINDER_PLIST" "Set :DesktopViewSettings:IconViewSettings:arrangeBy grid" "string"\nrun_plistbuddy "$FINDER_PLIST" "Set :FK_StandardViewSettings:IconViewSettings:arrangeBy grid" "string"\nrun_plistbuddy "$FINDER_PLIST" "Set :StandardViewSettings:IconViewSettings:arrangeBy grid" "string"\n\n# Set grid spacing\nrun_plistbuddy "$FINDER_PLIST" "Set :DesktopViewSettings:IconViewSettings:gridSpacing 100" "integer"\nrun_plistbuddy "$FINDER_PLIST" "Set :FK_StandardViewSettings:IconViewSettings:gridSpacing 100" "integer"\nrun_plistbuddy "$FINDER_PLIST" "Set :StandardViewSettings:IconViewSettings:gridSpacing 100" "integer"\n\n# Set icon size\nrun_plistbuddy "$FINDER_PLIST" "Set :DesktopViewSettings:IconViewSettings:iconSize 80" "integer"\nrun_plistbuddy "$FINDER_PLIST" "Set :FK_StandardViewSettings:IconViewSettings:iconSize 80" "integer"\nrun_plistbuddy "$FINDER_PLIST" "Set :StandardViewSettings:IconViewSettings:iconSize 80" "integer"\n\n# Kill Finder to apply changes\nkillall Finder &>/dev/null || true 